## Element Controller Configuration Specifications

**Version 1.0**
** March 26, 2019 **
** Copyright(c) 2019 Nippon Telegraph and Telephone Corporation**

### Configuration Definitions

  Configurations are classified and defined by their usage. Also, they are distributed into separate files according to the usage.The table below is a list of them.

  |Namae                      |Description            |
  |:--------------------------|:---------------|
  |ec_main.conf               |The file which describes the configurations to be imported during the start up of EC Main Module.|
  |act_disk_threshold.conf    |The file which describes the disk usage threshold configuration (used in controller status notification) of the ACT server.|
  |sby_disk_threshold.conf    |The file which describes the disk usage threshold configuration (used in controller status notification) of the SBY server.|
  |PingOspfNeighbor.conf      |The file which describes the configurations for the Pings sent between the devices and for monitoring OSPF neighbors.|
  |ControllerFileUpdate.conf  |The file which describes the configurations for updating the controller files.|
  |NodeOsUpgrade.conf         |The file which describes the configurations for upgrading OS in the device.|


### Rules of Description for Configurations

There are some rules to describe definitions in configuration files with KEY_VALUE method as follows.

|No.  |Rule of Description            |
|:---------|:---------------|
|1|Character Code: UTF-8|
|2|Line Feed Code: LF|
|3|Delimiter between Key and Value: =|
|4|A line feed must be inserted just after each pair of key and value.|
|5|If a line is started with "#", it is a comment line (and will not be imported).|
|6|Half-width space and TAB characters are prohibited to be used (even in front or behind of "=" sign) except in comments.|
|7|Full-width characters (incl. all Japanese characters) are prohibited to be used except in comments.|
|8|Characters "=" and "#" are prohibited to be used in keys and values.|

Description Example (case of `ec_main.conf`)

~~~console
#REST Waiting I/F Address
rest_server_address=0.0.0.0
#REST Waiting Port
Port_number=8080
~~~

### 1. ec_main.conf

The table below shows the detail of items which are managed in the EC configuration file.

|No.|Item Name                                                                               |Key                                |Description                                                                                                                              |Required?|default Value                     |Type|Unit |Remarks|
|:--|:---------------------------------------------------------------------------------------|:----------------------------------|:----------------------------------------------------------------------------------------------------------------------------------------------|:--|:---------------------------------|:---|:----|:------|
|  1|REST Waiting Interface Address                                                          |rest_server_address                |REST waiting interface address                                                                                                                 |No |0.0.0.0                           |TEXT|-    |-      |
|  2|REST Waiting Port                                                                       |rest_server_port                   |REST waiting port; equal or greater than 0, equal or smaller than 65535                                                                        |No |18080                             |INT |-    |-      |
|  3|No. of Retries When REST Request Failed                                                 |rest_retry_num                     |the number of retry when REST request was failed; equal or greater than 0                                                                      |No |0                                 |INT |times|If 0, retry will not performed. This is used when EC sends request to FC or EM as a client.|
|  4|REST Request Timeout Time                                                               |rest_timeout                       |REST request timeout time; equal or greater than 1                                                                                             |Yes|-                                 |INT |sec  |This is used when EC sends request to FC or EM as a client. Connection timeout values are dependent on the OS configuration.|
|  5|FC Connection Address (for REST)                                                        |fc_address                         |FC connection address (for REST)                                                                                                               |Yes|-                                 |TEXT|-    |-      |
|  6|FC Connection Port Number (for REST)                                                    |fc_port                            |FC connection port number (for REST); equal or greater than 0, equal or smaller than 65535                                                     |Yes|-                                 |INT |-    |-      |
|  7|Service Running Status                                                                  |service_status                     |service star-up status; Specify either "in ready for start (startready)" or "in the process of changing over (changeover)".                    |No |startready                        |TEXT|-    |Fixed Value (Set the default value.)|
|  8|Maintenance Blockage Status                                                             |blockade_status                    |maintenance blockage status; Specify either "blocked (busy)" or "opened (inservice)".                                                          |No |inservice                         |TEXT|-    |Fixed Value (Set the default value.)|
|  9|EM Connection Address (for NETCONF over ssh)                                            |em_address                         |EM connection address (for NETCONF over ssh)                                                                                                   |Yes|-                                 |TEXT|-    |-      |
| 10|EM Connection Port Number (for NETCONF over ssh)                                        |em_port                            |EM connection port number (for NETCONF over ssh); equal or greater than 0, equal or smaller than 65535                                         |Yes|-                                 |INT |-    |-      |
| 11|EM Connection User Name (for NETCONF over ssh)                                          |em_user                            |EM connection user name (for NETCONF over ssh)                                                                                                 |Yes|-                                 |TEXT|-    |-      |
| 12|EM Connection Password (for NETCONF over ssh)                                           |em_password                        |EM connection password (for NETCONF over ssh)                                                                                                  |Yes|-                                 |TEXT|-    |-      |
| 13|EM Connection Timeout Value (for NETCONF over ssh)                                      |em_timeout                         |EM connection timeout value (for NETCONF over ssh); equal or greater than 1                                                                    |Yes|-                                 |INT |sec  |-      |
| 14|SNMP Request Timeout Time in Configuration Management Function                          |device_snmp_timeout                |SNMP request timeout time in the configuration management function; equal or greater than 1                                                    |Yes|-                                 |INT |sec  |-      |
| 15|I/F Status Adjustment Process Execution Cycle                                           |failure_mib_interval               |I/F status adjustment process execution cycle; equal or greater than 1                                                                         |Yes|-                                 |INT |sec  |-      |
| 16|SNMP Request Timeout Time in Failure Management Function                                |failure_snmp_timeout               |SNMP request timeout time in the failure management function; equal or greater than 1                                                          |Yes|-                                 |INT |sec  |-      |
| 17|Execution Cycle of MIB Collection from the Managed Device in Traffic Management Function|traffic_mib_interval               |execution cycle of MIB collection from the managed device in traffic management function; equal or greater than 0                              |No |1                                 |INT |min  |If 0, do not operate the traffic management function. Make it the same value as the "traffic_tm_interval" of FC.|
| 18|Timeout Time for MIB Collection                                                         |traffic_snmp_timeout               |timeout time for MIB collection; equal or greater than 1 (exceptionally 0 when traffic_mib_interval is 0)                                      |No |(traffic_mib_intervaｌ x 60)/2    |INT |sec  |-      |
| 19|Timeout Value for Waiting EM Queue                                                      |em_queue_timeout                   |timeout value for waiting EM queue; equal or greater than 1                                                                                    |Yes|-                                 |INT |sec  |-      |
| 20|DHCP Configuration File                                                                 |device_dhcp_config                 |DHCP configuration file (/etc/dhcp/dhcpd.conf)                                                                                                 |Yes|-                                 |TEXT|-    |-      |
| 21|Periodic Termination Process Timeout Time                                               |gather_mib_stop_timeout            |timeout value for waiting for the completion of the running I/F status adjustment process in the periodic termination process of the device information collection functional part; This value is used for other periodically operated functions.; equal or greater than 1|Yes|-|INT |sec|-      |
| 22|Periodic Termination Process Status Confirmation Cycle                                  |gather_mib_stop_interval           |confirmation cycle for the status of I/F status adjustment process in the periodic termination process of the device information collection functional part; This value is used for other periodically operated functions.; equal or greater than 1|Yes|-|INT|msec|-      |
| 23|RSYSLOG Configuration File Name                                                         |device_rsyslog_config              |RSYSLOG configuration file (/etc/rsyslog.conf)                                                                                                 |Yes|-                                 |TEXT|-    |-      |
| 24|Timeout Value for Waiting Operation Queue                                               |operation_queue_timeout            |timeout value for waiting operation queue; equal or greater than 1                                                                             |Yes|-                                 |INT |sec  |-      |
| 25|EC Management I/F Address                                                               |device_ec_management_if            |management I/F address of EC (for DHCP configuration)                                                                                          |Yes|-                                 |TEXT|-    |-      |
| 26|Max. No. of REST Process Threads                                                        |rest_thread_max                    |the upper limit of the number of REST process threads (the number of running threads for the process received from FC); equal or greater than 1|Yes|-                                 |INT |-    |In case changing the value, it is needed to be matched with the number of DB connection pools.|
| 27|Script Installation Path                                                                |script_path                        |the path where the script called for by rsyslogd (boot.sh) is located                                                                          |Yes|-                                 |TEXT|-    |-      |
| 28|Request Log Output Path                                                                 |request_log_path                   |destination path of log for responding FC in jetty                                                                                             |Yes|-                                 |TEXT|-    |-      |
| 29|Request Log Retention Period (Days)                                                     |request_keep_period                |retention period of the destination path of log for responding FC in jetty; equal or greater than 1                                            |Yes|-                                 |INT |days |-      |
| 30|No. of Retries for REST Waiting I/F bind Failure                                        |rest_server_bind_ng_retry_num      |the number of retries for REST waiting interface bind failure; equal or greater than 0                                                         |Yes|-                                 |INT |times|-      |
| 31|ACT Server Physical IP Address                                                          |server_physical_address            |own server physical IP address                                                                                                                 |Yes|-                                 |TEXT|-    |-      |
| 32|EM Connection Address (for REST)                                                        |em_rest_address                    |EM connection address (for REST)                                                                                                               |Yes|-                                 |INT |-    |-      |
| 33|EM Connection Port Number (for REST)                                                    |em_rest_port                       |EM connection port number (for REST); equal or greater than 0, equal or smaller thatn 65535                                                    |Yes|-                                 |INT |-    |-      |
| 34|No. of REST Requests Average Time                                                       |rest_request_average               |the unit time (sec) used in calculating the number of REST requests                                                                            |Yes|3600                              |INT |sec  |-      |
| 35|Log File Path                                                                           |log_file_path                      |the path where the Processing log file (application_info.log) is located                                                                       |Yes|-                                 |TEXT|-    |-      |
| 36|Internal Link VLAN ID                                                                   |internal_link_vlanid               |VLAN ID for Internal Link IF                                                                                                                   |Yes|-                                 |INT |-    |-      |
| 37|Config-Audit monitoring interval                                                        |config_audit_monitor_interval      |Config-Audit monitoring interval; equal or greater than 0                                                                                      |Yes|-                                 |INT |min  |If 0, do not operate the Config-Audit monitor function.|
| 38|Connection Address for notifying the difference information on Config-Audit             |config_audit_monitor_notify_address|Connection Address for notifying the difference information on Config-Audit                                                                    |No |It means "null", if it is not set.|TEXT|-    |If it is not be set, use the FC connection address(REST).|
| 39|Connection Port number for notifying the difference information on Config-Audit         |config_audit_monitor_notify_port   |Connection Port number for notifying the difference information on Config-Audit                                                                |No |It means "null", if it is not set.|INT |-    |If it is not be set, use the FC connection port(REST).   |
| 40|URL for notifying the difference information on Config-Audit                            |config_audit_monitor_notify_url    |URL for notifying the difference information on Config-Audit                                                                                   |Yes|-                                 |TEXT|-    |-      |
| 41|Execution judgment configuration of controller status notification (Log Level : INFO)   |notice_log_level_info              |Execution judgment configuration of controller status notification (Log Level : INFO) ;If this configuration is "true", it should be notified. |Yes|-                                 |TEXT|-    |true：means it should be notified, false：means it should not be notified|
| 42|Execution judgment configuration of controller status notification (Log Level : WARN)   |notice_log_level_warn              |Execution judgment configuration of controller status notification (Log Level : WARN) ;If this configuration is "true", it should be notified. |Yes|-                                 |TEXT|-    |true：means it should be notified, false：means it should not be notified|
| 43|Execution judgment configuration of controller status notification (Log Level : ERROR)  |notice_log_level_error             |Execution judgment configuration of controller status notification (Log Level : ERROR) ;If this configuration is "true", it should be notified.|Yes|-                                 |TEXT|-    |true：means it should be notified, false：means it should not be notified|
| 44|Threshold for ACT-CPU utilization                                                       |act_cpu_threshold                  |Threshold for ACT-CPU utilization                                                                                                              |Yes|-                                 |INT |\%   |-      |
| 45|Threshold for ACT-memory utilization                                                    |act_memory_threshold               |Threshold for ACT-memory utilization                                                                                                           |Yes|-                                 |INT |KB   |-      |
| 46|Threshold for the Controller-CPU utilization                                            |controller_cpu_threshold           |Threshold for the Controller-CPU utilization                                                                                                   |Yes|-                                 |INT |\%   |-      |
| 47|Threshold for the Controller-memory utilization                                         |controller_memory_threshold        |Threshold for the Controller-memory utilization                                                                                                |Yes|-                                 |INT |KB   |-      |
| 48|Threshold for SBY-CPU utilization                                                       |sby_cpu_threshold                  |Threshold for SBY-CPU utilization                                                                                                              |No |-                                 |INT |\%   |This should not be set in case of the non-redundant-system.|
| 49|Threshold for SBY-memory utilization                                                    |sby_memory_threshold               |Threshold for SBY-memory utilization                                                                                                           |No |-                                 |INT |KB   |This should not be set in case of the non-redundant-system.|
| 50|IP address for SBY                                                                      |sby_ip_address                     |SBY IP address used when the SBY contrller status is notified                                                                                  |No |-                                 |TEXT|-    |This should not be set in case of the non-redundant-system.|
| 51|Shell File Path for getting  the SBY-controller staus                                   |sby_status_get_shell_file          |The script path for getting the SBY controller status                                                                                          |No |-                                 |TEXT|-    |This should not be set in case of the non-redundant-system.|
| 52|User Name for SBY log-in                                                                |sby_usrname                        |User name for SSH-connection with the SBY controller                                                                                           |No |-                                 |TEXT|-    |This should not be set in case of the non-redundant-system.|
| 53|User Password for SBY log-in                                                            |sby_password                       |User password for SSH-connection with the SBY controller                                                                                       |No |-                                 |TEXT|-    |This should not be set in case of the non-redundant-system.|
| 54|The interval for monitoring the server staus                                            |controller_status_interval         |The interval for monitoring the server staus                                                                                                   |Yes|-                                 |INT |msec |-      |
| 55|Name of resource group                                                                  |ec_resource_group_name             |Name of resource group which used confirming failover completion                                                                               |No |-                                 |TEXT|-    |This should not be set in case of the non-redundant-system.|
| 56|Name of the monitored resource                                                          |ec_resource_status_target_name     |Name of the monitored resource which used confirming failover completion                                                                       |No |-                                 |TEXT|-    |This should not be set in case of the non-redundant-system.|
| 57|Interval for confirming failover completion                                             |resource_check_interval            |Interval for confirming failover completion                                                                                                    |No |-                                 |INT |sec  |This should not be set in case of the non-redundant-system.|
| 58|Number of times to confirm failover completion                                          |number_of_resource_check           |Number of times to confirm failover completion                                                                                                 |No |-                                 |INT |times|This should not be set in case of the non-redundant-system.|
| 59|No. of Retries When OSPF Neighbor Establishment Confirmation Failure                    |ospf_neighbor_retry_num            |the number of retry when OSPF neighbor establishment confirmation was failed; equal or greater than 0                                          |Yes|-                                 |INT |times|-      |
| 60|Interval Times of Retries When OSPF Neighbor Establishment Confirmation Failure         |ospf_neighbor_retry_interval       |the interval times of retry when OSPF neighbor establishment confirmation was failed; equal or greater than 0                                  |Yes|-                                 |INT |msec |-      |

### 2. act_disk_threshold.conf

The table below shows the detail of items which are managed in the configuration file for the disk utilization in the ACT server.

|No.|Item Name                                                                               |Key                                                          |Description                                                                                                                              |Required?|default Value                     |Type|Unit |Remarks|
|:--|:---------------------------------------------------------------------------------------|:------------------------------------------------------------|:----------------------------------------------------------------------------------------------------------------------------------------------|:--|:---------------------------------|:---|:----|:------|
|  1|Threshold for disk utilization                                                          |Mount point of the file system  which is monitoring target of the server status|Threshold for disk utilization                                                                                               |Yes|-                                 |INT |KB   |-      |

#### Example description of the configuration
> /dev=1000000<br>
> /sys/fs/cgroup=500000

### 3. sby_disk_threshold.conf

The table below shows the detail of items which are managed in the configuration file for the disk utilization in the SBY server.

|No.|Item Name                                                                               |Key                                                          |Description                                                                                                                              |Required?|default Value                     |Type|Unit |Remarks|
|:--|:---------------------------------------------------------------------------------------|:------------------------------------------------------------|:----------------------------------------------------------------------------------------------------------------------------------------------|:--|:---------------------------------|:---|:----|:------|
|  1|Threshold for disk utilization                                                          |Mount point of the file system  which is monitoring target of the server status|Threshold for disk utilization                                                                                               |Yes|-                                 |INT |KB   |-      |

#### Example description of the configuration
> /dev=1000000<br>
> /sys/fs/cgroup=500000

### 4. PingOspfNeighbor.conf

The table below shows the detail of items which are managed in the configuration file which are used in Ping communication between devices and when monitoring OSPF-neighbors.

|No.|Item Name                                                                               |Key                                                          |Description                                                                                                                              |Required?|default Value                     |Type|Unit |Remarks|
|:--|:---------------------------------------------------------------------------------------|:------------------------------------------------------------|:----------------------------------------------------------------------------------------------------------------------------------------------|:--|:---------------------------------|:---|:----|:------|
|  1|Directory path for the script executing Ping                                            |ping_script_dir_path                                         |Directory path for storing the script for Ping communication                                                                                   |Yes|-                                 |TEXT|-    |An Absolute path is required  in the parameter. When installed, the following path is set.<br> /usr/ec_main/bin/extended_script/ping_script/|
|  2|Number of retrials for ping communcation between devices                                |ping_retry_num                                               |Number of retrials for ping communcation between devices                                                                                       |Yes|-                                 |INT |times|-      |
|  3|Timeout of the ping communication between devices                                       |all_ping_timeout                                             |Time-out period when Ping responses have been received from  the all required devices                                                          |Yes|-                                 |INT |sec  |-      |
|  4|Timeout of the OSPF-neighbors                                                           |all_ospf_neighbor_timeout                                    |Time-out period when neighbor information have been received from the all required devices                                                     |Yes|-                                 |INT |sec  |The valure or more than the following should be set.<br> \*See chapter 'ec_main.conf' for the descrption in each item.<br><br>\(device_snmp_timeout \+ ospf_neighbor_retry_interval \* 1000\) \* \(ospf_neighbor_retry_num \+ 1\)|

### 5. ControllerFileUpdate.conf

The table below shows the detail of items which are managed in the configuration file which are used in the controller file upgrade.

|No.|Item Name                                                                               |Key                                                          |Description                                                                                                                              |Required?|default Value                     |Type|Unit |Remarks|
|:--|:---------------------------------------------------------------------------------------|:------------------------------------------------------------|:----------------------------------------------------------------------------------------------------------------------------------------------|:--|:---------------------------------|:---|:----|:------|
|  1|Path for storing the script describing the failover execution                           |switch_script_file_path                                      |Path for storing the script describing the failover execution                                                                                  |Yes|-                                 |TEXT|-    |Full Path is required.|

### 6. NodeOsUpgrade.conf

The table below shows the detail of items which are managed in the configuration file which are used in device OS upgrade.

|No.|Item Name                                                                               |Key                                                          |Description                                                                                                                              |Required?|default Value                     |Type|Unit |Remarks|
|:--|:---------------------------------------------------------------------------------------|:------------------------------------------------------------|:----------------------------------------------------------------------------------------------------------------------------------------------|:--|:---------------------------------|:---|:----|:------|
|  1|Timeout of the waiting for device OS upgrade                                            |node_os_upgrade_timer                                        |Time-out period when waiting that OS has been upgraded in the device                                                                           |Yes|-                                 |INT |sec  |-      |
